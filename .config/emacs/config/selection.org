#+TITLE: Selection
#+OPTIONS: toc:nil
#+PROPERTY: header-args:emacs-lisp :shebang ";;; -*- lexical-binding: t; -*-\n"

** Table of Contents :toc_4:
  - [[#selection][Selection]]

** Selection

#+BEGIN_SRC emacs-lisp
(use-package selectrum
  :hook (emacs-startup . selectrum-mode)
  :config

  (defun dot/selectrum-backspace ()
	"In Selectrum file completion, backward kill sexp, delete char otherwise."
	(interactive)
	(if (and selectrum-is-active
			 minibuffer-completing-file-name)
		(evil-with-state 'insert
		  (move-end-of-line 1) (backward-kill-sexp 1))
	  (evil-delete-backward-char-and-join 1))))

(use-package prescient
  :after selectrum
  :config
  (setq prescient-filter-method '(literal regexp fuzzy))
  (setq prescient-save-file (concat dot-cache-dir "/prescient-save.el"))
  (prescient-persist-mode))

(use-package selectrum-prescient
  :after (selectrum prescient)
  :config
  (selectrum-prescient-mode))

(use-package marginalia
  :after selectrum
  :config
  (setq marginalia-annotators '(marginalia-annotators-heavy marginalia-annotators-light))
  (marginalia-mode))

(use-package consult
  :after selectrum
  :config (setq consult-narrow-key (kbd "?")))

(use-package consult-flycheck
  :after (consult flycheck))

(use-package consult-project-extra
  :after (consult project)
  :config (setq project-switch-commands 'consult-project-extra-find))
#+END_SRC
